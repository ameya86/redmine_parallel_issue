<%# 同時作成用の担当者欄と切り替えボタン %>
<%= link_to_function(image_tag('bullet_toggle_plus.png'),
       "toggle_parallel_assignees();", :id => "issue_assigned_to_id_toggle") %>
<%= select_tag('issue[parallel_assignee_ids]',
      options_for_select(@issue.assignable_users.collect{|u| [u.name, u.id.to_s]}),
      :multiple => true, :style => "display: none;", :disabled => true) %>

<% javascript_tag do %>
<%# 担当者の箇所へ移動させる %>
assign_parent = $('issue_assigned_to_id').parentNode;
assign_parent.appendChild($('issue_parallel_assignee_ids'));
assign_parent.appendChild($('issue_assigned_to_id_toggle'));

<%# 担当者欄を切り替える %>
function toggle_parallel_assignees() {
  assigned_to = $('issue_assigned_to_id');
  parallel_assignees = $('issue_parallel_assignee_ids');

  assigned_to.toggle();
  parallel_assignees.toggle();

  assigned_to.disabled = !assigned_to.disabled;
  parallel_assignees.disabled = !parallel_assignees.disabled;
}
<% end %>
